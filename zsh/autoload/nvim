#!/bin/zsh

# If user tries to edit a directory, first attempts to edit files of the form
# DIRNAME.* before exiting with an error.


# Needed for the #q glob flag
setopt EXTENDED_GLOB

# Checks if the first argument is a directory
if [[ -d $1 ]]; then
  local new="$1.*"
  # Checks if the glob matches by checking the amount of matches
  if [[ -n ${~new}(#qN) ]]; then
    # Matches the glob pattern
    local file=(${~new})
    # Uses command to non-recursively call neovim
    command nvim $file ${@[2,-1]}
  else
    echo "$1 is a directory!"
    return 1
  fi
else
  command nvim $@
fi
